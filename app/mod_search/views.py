# coding=utf-8
from flask import Blueprint, render_template, request
import cyrtranslit
from slugify import slugify

mod_search = Blueprint('search', __name__, url_prefix='/<lang_code>/search')

@mod_search.route('/', methods=['GET'])
def index():
    source = (request.args.get('source') if request.args.get('source') != None else "EVERYTHING")
    type = (request.args.get('type') if request.args.get('type') != None else "budget")
    municipality = (request.args.get('municipality') if request.args.get('municipality') != None else "EVERYWHERE")
    year = (request.args.get('year') if request.args.get('year') != None else "ALL YEARS")
    data = [
        "Барајево",
        "Вождовац",
        "Врачар",
        "Гроцка",
        "Звездара",
        "Земун",
        "Лазаревац",
        "Младеновац",
        "Нови Београд",
        "Обреновац",
        "Палилула",
        "Раковица",
        "Савски Венац",
        "Сопот",
        "Стари Град",
        "Чукарица",
        "Бачка Топола",
        "Мали Иђош",
        "Суботица - град",
        "Житиште",
        "Зрењанин - град",
        "Нова Црња",
        "Нови Бечеј",
        "Сечањ",
        "Ада",
        "Кањижа",
        "Кикинда",
        "Нови Кнежевац",
        "Сента",
        "Чока",
        "Алибунар",
        "Бела Црква",
        "Вршац",
        "Ковачица",
        "Ковин",
        "Опово",
        "Панчево - град",
        "Пландиште",
        "Апатин",
        "Кула",
        "Оџаци",
        "Сомбор - град",
        "Бач",
        "Бачка Паланка",
        "Бачки Петровац",
        "Беочин",
        "Бечеј",
        "Жабаљ",
        "Град Нови Сад",
        "Србобран",
        "Сремски Карловци",
        "Темерин",
        "Тител",
        "Врбас",
        "Инђија",
        "Ириг",
        "Пећинци",
        "Рума",
        "Сремска Митровица - град",
        "Стара Пазова",
        "Шид",
        "Богатић",
        "Владимирци",
        "Коцељева",
        "Крупањ",
        "Лозница - град",
        "Љубовија",
        "Мали Зворник",
        "Шабац - град",
        "Ваљево - град",
        "Лајковац",
        "Љиг",
        "Мионица",
        "Осечина",
        "Уб",
        "Велика Плана",
        "Смедерево - град",
        "Смедеревска Паланка",
        "Велико Градиште",
        "Голубац",
        "Жабари",
        "Кучево",
        "Мало Црниће",
        "Петровац",
        "Град Пожаревац",
        "Аранђеловац",
        "Баточина",
        "Кнић",
        "Крагујевац - град",
        "Рача",
        "Топола",
        "Лапово",
        "Деспотовац",
        "Параћин",
        "Рековац",
        "Јагодина - град",
        "Свилајнац",
        "Ћуприја",
        "Бор",
        "Кладово",
        "Мајданпек",
        "Неготин",
        "Бољевац",
        "Зајечар - град",
        "Књажевац",
        "Сокобања",
        "Ариље",
        "Бајина Башта",
        "Косјерић",
        "Нова Варош",
        "Пожега",
        "Прибој",
        "Пријепоље",
        "Сјеница",
        "Ужице - град",
        "Чајетина",
        "Горњи Милановац",
        "Ивањица",
        "Лучани",
        "Чачак - град",
        "Врњачка Бања",
        "Краљево - град",
        "Нови Пазар - град",
        "Рашка",
        "Тутин",
        "Александровац",
        "Брус",
        "Варварин",
        "Крушевац - град",
        "Трстеник",
        "Ћићевац",
        "Алексинац",
        "Гаџин Хан",
        "Дољевац",
        "Мерошина",
        "Ниш-град",
        "Ражањ",
        "Сврљиг",
        "Нишка бања",
        "Блаце",
        "Житорађа",
        "Куршумлија",
        "Прокупље",
        "Бабушница",
        "Бела Паланка",
        "Димитровград",
        "Пирот",
        "Бојник",
        "Власотинце",
        "Лебане",
        "Лесковац - град",
        "Медвеђа",
        "Црна Трава",
        "Босилеград",
        "Бујановац",
        "Владичин Хан",
        "Град Врање",
        "Прешево",
        "Сурдулица",
        "Косово Поље",
        "Липљан",
        "Обилић",
        "Приштина - град",
        "Штрпце",
        "Исток",
        "Пећ",
        "Ораховац",
        "Призрен",
        "Вучитрн",
        "Зубин Поток",
        "Лепосавић",
        "Србица",
        "Косовска Митровица",
        "Звечан",
        "Витина",
        "Гњилане",
        "Косовска Каменица",
        "Ново Брдо",
    ]
    dataslug=[]
    for name in data:
        dataslug.append({
            'teritorija':unicode(name, 'utf-8'),
            'slug': slugify(cyrtranslit.to_latin(name, 'sr'),to_lower=True)
        })

    return render_template('mod_search/index.html',
        source=source,
        type=type,
        municipality=municipality,
        year=year,
        dataslug =dataslug)


