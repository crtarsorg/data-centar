{% extends "layout.html" %}
{% block body %}
    <script>
        $( document ).ready(function(){
            $( "#btn-post-sum-req" ).click(function() {
                postSumRequest();
            });
            $( "#btn-post-activities-req" ).click(function() {
                post_classifications_req();
            });

        });

    function postSumRequest(){

        var data = get_request_form_data('sum-req-form');

        $.ajax({
          type: "POST",
          url: '{{ url_for('api.sum') }}',
          contentType: 'application/json',
          data: JSON.stringify(data),
          success: function(rsp){
              $('#sum-req-body-box').text(JSON.stringify(data, null, 4));
              $('#sum-req-rsp-box').text(JSON.stringify(rsp, null, 4));
              Prism.highlightAll();
          }
        });
    }

    function post_classifications_req(){
        var municipalities = [];
        $('#class_municipalities :selected').each(function(i, selected){
          municipalities[i] = $(selected).val();
        });

        var data = {
            "tipPodataka": $( '#class_data_type' ).val(),
            "godine": [parseInt($('#class_years').val())],
            "opstine": municipalities
        };

        $.ajax({
          type: "POST",
          url: '{{ url_for('api.activities') }}',
          contentType: 'application/json',
          data: JSON.stringify(data),
          success: function(rsp){
              $('#activities-req-body-box').text(JSON.stringify(data, null, 4));
              $('#activities-req-rsp-box').text(JSON.stringify(rsp, null, 4));
              Prism.highlightAll();
          }
        });
    }
    </script>
    <script src="{{ url_for('static', filename='prismjs/prism.js') }}"></script>
    <link href="{{ url_for('static', filename='prismjs/prism.css') }}" rel="stylesheet">
    <style>
        .panel-body{
            color:#333;
        }
        .tab-content{
            padding-top:15px;
        }
    </style>
    <!-- Contact Section -->
    <section id="title" class="container text-center" style="padding-top:100px">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <h2><i class="fa fa-flask"></i> API</h2>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            </div>
        </div>
    </section>
    <section id="api-sums" class="container" style="padding-top:50px">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">

                <div class="panel panel-default">
                    <div class="panel-heading text-center">
                        <h3 class="panel-title">Sums</h3>
                    </div>
                    <div class="panel-body">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#sums-how" aria-controls="sums-how" role="tab" data-toggle="tab">How?</a></li>
                            <li role="presentation"><a href="#sums-tryit" aria-controls="sums-tryit" role="tab" data-toggle="tab">Try it!</a></li>
                        </ul>

                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="sums-how">
                                <h4>OPIS:</h4>
                                    Koristite ovaj POST zahtev za preuzimanje podataka.

                                <br><br>

                                <h4>URL POST ZAHTEVA:</h4>
                                    http://0.0.0.0:5001/api/zbir
                                <br><br>
                                <h4>PARAMETRI UPITA:</h4>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>
                                                Parameter
                                            </th>
                                            <th>
                                                Vrsta
                                            </th>
                                            <th>
                                                Opis
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>
                                                Tip podataka
                                            </th>
                                            <td>
                                                Stringova
                                            </td>
                                            <td>
                                                Lorem ipsum dolor sit amet, consectetur adipiscing elit
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>
                                                godine
                                            </th>
                                            <td>
                                                Lista celih brojeva
                                            </td>
                                            <td>
                                                Godine za koje želimo da preuzmemo podatke.
                                            </td>
                                        </tr>

                                        <tr>
                                            <th>
                                                opstine
                                            </th>
                                            <td>
                                                Lista stringova
                                            </td>
                                            <td>
                                                Opštine.
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>
                                                klasifikacijaBroj
                                            </th>
                                            <td>
                                                Lista celih brojeva
                                            </td>
                                            <td>
                                                Ekonomskih klasifikacija
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div role="tabpanel" class="tab-pane" id="sums-tryit">

                                <div class="row">
                                    <div class="col-md-8">
                                        <form class="form-horizontal" id="sum-req-form">
                                            <div class="form-group">
                                                {{ sum_req_form.data_type.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.data_type(class="form-control") }}
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ sum_req_form.years.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.years(class="form-control") }}
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ sum_req_form.municipalities.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.municipalities(class="form-control") }}
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ sum_req_form.classifications.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.classifications(class="form-control") }}
                                                </div>
                                            </div>
                                        </form>
                                        <button class="btn btn-primary" id="btn-post-sum-req">POST</button>
                                    </div>
                                    <div class="col-md-4">
                                        <strong>Request Body:</strong>
                                        <pre style="height:258px;">
                                            <code class="language-javascript" id="sum-req-body-box"></code>
                                        </pre>
                                    </div>
                                </div>

                                <div style="padding-top:20px;">
                                    <strong>Response:</strong>
                                    <pre style="height:250px;">
                                        <code class="language-javascript" id="sum-req-rsp-box"></code>
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="api-activities" class="container" style="padding-top:50px">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2">
                <div class="panel panel-default">
                    <div class="panel-heading  text-center">
                        <h3 class="panel-title">Activities</h3>
                    </div>
                    <div class="panel-body">
                        <!-- Nav tabs -->
                        <ul class="nav nav-tabs" role="tablist">
                            <li role="presentation" class="active"><a href="#activities-how" aria-controls="activities-how" role="tab" data-toggle="tab">How?</a></li>
                            <li role="presentation"><a href="#activities-tryit" aria-controls="activities-tryit" role="tab" data-toggle="tab">Try it!</a></li>
                        </ul>

                        <!-- Tab panes -->
                        <div class="tab-content">
                            <div role="tabpanel" class="tab-pane active" id="activities-how">
                                <h4>OPIS:</h4>
                                    Koristite ovaj POST zahtev za preuzimanje podataka.

                                <br><br>

                                <h4>URL POST ZAHTEVA:</h4>
                                    http://0.0.0.0:5001/api/ekonomska-klasifikacija
                                <br><br>
                                <h4>PARAMETRI UPITA:</h4>
                                <table class="table table-striped">
                                    <thead>
                                        <tr>
                                            <th>
                                                Parameter
                                            </th>
                                            <th>
                                                Vrsta
                                            </th>
                                            <th>
                                                Opis
                                            </th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <th>
                                                Tip podataka
                                            </th>
                                            <td>
                                                Stringova
                                            </td>
                                            <td>
                                                Lorem ipsum dolor sit amet, consectetur adipiscing elit
                                            </td>
                                        </tr>
                                        <tr>
                                            <th>
                                                godine
                                            </th>
                                            <td>
                                                Lista celih brojeva
                                            </td>
                                            <td>
                                                Godine za koje želimo da preuzmemo podatke.
                                            </td>
                                        </tr>

                                        <tr>
                                            <th>
                                                opstine
                                            </th>
                                            <td>
                                                Lista stringova
                                            </td>
                                            <td>
                                                Opštine.
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div role="tabpanel" class="tab-pane" id="activities-tryit">
                                <div class="row">
                                    <div class="col-md-8">
                                        <form class="form-horizontal" id="sum-req-form">
                                            <div class="form-group">
                                                {{ sum_req_form.data_type.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.data_type(class="form-control", id="class_data_type") }}
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ sum_req_form.years.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.years(class="form-control", id="class_years") }}
                                                </div>
                                            </div>
                                            <div class="form-group">
                                                {{ sum_req_form.municipalities.label(class="control-label col-xs-2") }}
                                                <div class="col-xs-10">
                                                    {{ sum_req_form.municipalities(class="form-control", id="class_municipalities") }}
                                                </div>
                                            </div>
                                        </form>
                                        <button class="btn btn-primary" id="btn-post-activities-req">POST</button>
                                    </div>
                                    <div class="col-md-4">
                                        <strong>Request Body:</strong>
                                        <pre style="height:258px;">
                                            <code class="language-javascript" id="activities-req-body-box"></code>
                                        </pre>
                                    </div>
                                </div>
                                <div style="padding-top:20px;">
                                    <strong>Response:</strong>
                                    <pre style="height:400px;">
                                        <code class="language-javascript" id="activities-req-rsp-box"></code>
                                    </pre>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
{% endblock %}