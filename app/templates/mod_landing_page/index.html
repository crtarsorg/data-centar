{% extends "layout.html" %} 
{% block body %}


<style>
  .vis{
    width: 100%;
    height: 500px;
  }

  svg {
    width: 100%;
    height: 100%;
  }

  path.slice{
    stroke-width:2px;
  }

  .label{
    fill: white;
  }
  polyline{
    opacity: .3;
    stroke: black;
    stroke-width: 2px;
    fill: none;
  }

</style>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>

<script>
  
//https://developers.google.com/youtube/player_parameters?hl=en
    
  var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/player_api";

  var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

  var player;

  function onYouTubePlayerAPIReady() {
    player = new YT.Player('ytplayerLanding', {
     /* height: '390',
      width: '640',*/
      videoId: 'k7uuLp5FpJA',
      playerVars: { 
         'showinfo': 0,
         /*'controls': 1,*/
         'autohide':1
        }
      
    });
  }


 function favouriteQueries () {
      var data = [
          {"url":"./api?data=1","text":"Show me data about MUNICIPAL BUDGETS in BELGRADE in 1999 related to EDUCATION"},
          {"url":"./api?data=2","text":"Show me data about MUNICIPAL DONATIONS in NIS in 2010 related to PUBLIC TRANSPORTATIONS"},
          {"url":"./api?data=3","text":"Show me data about MUNICIPAL BUDGETS in NOVI SAD in 2010 related to PUBLIC HEALTH"},
          {"url":"./api?data=4","text":"Show me data about MUNICIPAL EXPANDITURES in PRIJEPOLJE in 2015 related to PROCUREMENT"},
          {"url":"./api?data=5","text":"Show me data about REGIONAL INCOMES in CENTRALNA SRBIJA in 2013 "}
      ];
      var indx = Math.floor(Math.random()*4); 

      return data[indx];

  } 

$(function () {

  $("#anotherFavQuery").click(function () {
          
        var datum = favouriteQueries(); 
        $("#searchWithParams").html(datum.text);
        $("#searchWithParams").parent().attr("href",datum.url);
    })
  

})


 var data = [{"conto":710000,"opis":"Prihodi","vrednost":100000},{"conto":712000,"opis":"Porez na zarade","vrednost":65000}, {"conto":713000,"opis":"Porez na imovinu","vrednost":650000},{"conto":730000,"opis":"Donacije i transferi","vrednost":65000},{"conto":733000,"opis":"Transferi od drugih nivoa vlasti","vrednost":720000},{"conto":410000,"opis":"Rashodi za zaposlene", "vrednost":72000},{"conto":422000,"opis":"Troskovi putovanja", "vrednost":2000},{"conto":460000,"opis":"Donacije, dotacije i transferi", "vrednost":2000},{"conto":450000,"opis":"Subvencije", "vrednost":25000}]




 $(function () {



  data.forEach(function(temp) {
      temp.name = temp.opis;
      temp.y = temp.vrednost;
  })

  var podaci =  data;



  var colors = (function () {
        var colors = [],
            base = Highcharts.getOptions().colors[0],
            i;

        for (i = 0; i < 10; i += 1) {
            // Start out with a darkened base color (negative brighten), and end
            // up with a much brighter color
            colors.push(Highcharts.Color(base).brighten((i - 3) / 7).get());
        }
        return colors;
    }());

  Highcharts.getOptions().plotOptions.pie.colors =  colors;

    $('.vis').highcharts({
        chart: {
            plotBackgroundColor: null,
            plotBorderWidth: null,
            plotShadow: false,
            type: 'pie',
            backgroundColor:"#7DC1D1"
        },
        title: {
            text: ''
        },
        tooltip: {
            pointFormat: '{series.name}: <b>{point.y} din</b>'
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,
                cursor: 'pointer',
                dataLabels: {
                    enabled: true,
                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                    style: {"color": "white", "fontSize": "11px", "fontWeight": "bold", "textShadow": "none" }
                }
            }
        },
        series: [{
            name: 'Iznos',
            colorByPoint: true,
            data: podaci
        }]
    });
});


</script>

<!-- Intro Header; Welcome section -->
<section class="section-height">
    <header class="landing">
        <div class="intro primary-color">
            <div class="intro-content">
                <h3 class="text-center">Welcome</h3>
                    <p class="text-center lead">
                        Welcome to Data Center â€“ an open platform that helps you find, liberate and make use of different public data!
                </p>
            </div>
        </div>
            <div class="overlay-video">
                    <div class="col-md-6 col-md-offset-3 negative-margin-5">
                        
                        
                        <div class='embed-container'>
                            <div id="ytplayerLanding"></div>
                        </div>
                        <div class="margin-10"><a href="{{ url_for('api.index') }}"><span id="searchWithParams">Show me data about MUNICIPAL BUDGETS in BELGRADE in 1999 related to EDUCATION</span></a></div>

                        <div class="row">
                            <div class="col-md-6 margin-10">

                            <a href="{{ url_for('api.index') }}">   
                                <button type="button" class="btn btn-block btn-lg  btn-link btn-white-border primary-color white-content " >
                                    Just take me to search
                                </button>
                            </a>
                            </div>
                            <div class="col-md-6 margin-10">
                                <button id="anotherFavQuery" type="button" class="btn btn-block btn-lg btn-link btn-white-border primary-color white-content">
                                    Meh, what else you got?
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        <!-- </div> -->
    </header>
</section>
<!-- What's avalible Section -->
<section id="avalibleS" class="container-fluid section-height secondary-color content-section text-center white-content">
    <div class="row">
        <div class="col-lg-8 col-lg-offset-2">
            <h2>What's avalible Section</h2>
            <!-- <img class="img-responsive text-center margin-auto" src="https://placeholdit.imgix.net/~text?txtsize=33&txt=800%C3%97400&w=800&h=400" alt=""> -->
            <div class="vis margin-auto">
            </div>
        </div>
    </div>
</section>


{% endblock %}
